<!-- Javascript -->
<script>
  var mainDivElement, originalSelectElement, selectedDIV, hiddenSelecctDIV, optionDIVs;

  // look for any elements with the class "custom-select"
  mainDivElement = document.getElementsByClassName("custom-select");

  // for each element, create a new DIV that will act as the selected item:
  for (var i = 0; i < mainDivElement.length; i++) {
    originalSelectElement = mainDivElement[i].getElementsByTagName("select")[0];
    selectedDIV = document.createElement("DIV");

    // set class of new DIV
    selectedDIV.setAttribute("class", "select-selected");
    selectedDIV.innerHTML = originalSelectElement.options[originalSelectElement.selectedIndex].innerHTML;

    // Add new div to parent DIV, custom-select
    mainDivElement[i].appendChild(selectedDIV);


    // for each element, create a new DIV that will contain the option list:
    hiddenSelecctDIV = document.createElement("DIV");
    hiddenSelecctDIV.setAttribute("class", "select-items select-hide");


    /*
      for each option in the original select element,
      create a new DIV that will act as an option item:
    */
    for (var j = 0; j < originalSelectElement.length; j++) {
      optionDIVs = document.createElement("DIV");
      optionDIVs.innerHTML = originalSelectElement.options[j].innerHTML;

      /*
        when an item is clicked, update the original select box,
        and the selected item:
      */
      optionDIVs.addEventListener("click", function(e) {
          var originalSelected, selectElement, selectedItem, customFont;

          // select element from HTML file
          selectElement = this.parentNode.parentNode.getElementsByTagName("select")[0];
          // shown selected dropdown element
          selectedItem = this.parentNode.previousSibling;

          /*
            For each select drop down HTMLs, check if click happened in there, then update
          */ 
          for (var i = 0; i < selectElement.length; i++) {
            // if matching option is found in original select and shown dropdown
            if (selectElement.options[i].innerHTML == this.innerHTML) {
              // replace selectElement text with clicked
              selectElement.selectedIndex = i;
              selectedItem.innerHTML = this.innerHTML;
              originalSelected = this.parentNode.getElementsByClassName("same-as-selected");

              // clear same-as-selected attribute on drop down options
              for (var k = 0; k < originalSelected.length; k++) {
                originalSelected[k].removeAttribute("class");
              }
              this.setAttribute("class", "same-as-selected");

              // Update the appropriate text box
              if (this.parentNode.parentNode.parentNode.id == "ScriptFontSelector") {
                  customFont = this.innerHTML.trim().replace(/\s/g, '');
                  var scriptTextArea = document.querySelector('#scriptFontTextBox');
                  scriptTextArea.removeAttribute("class");
                  scriptTextArea.classList.add(customFont);
              }
              else {
                  customFont = this.innerHTML.trim().replace(/\s/g, '');
                  var serifTextArea = document.querySelector('#serifFontTextBox');
                  serifTextArea.removeAttribute("class");
                  serifTextArea.classList.add(customFont);
              }

              break;
            }
          }
          selectedItem.click();
      });
      hiddenSelecctDIV.appendChild(optionDIVs);
    }
    mainDivElement[i].appendChild(hiddenSelecctDIV);

    /*
      when the select box is clicked, close any other select boxes,
      and open/close the current select box:
    */
    selectedDIV.addEventListener("click", function(e) {
        e.stopPropagation();
        closeAllSelect(this);
        this.nextSibling.classList.toggle("select-hide");
        this.classList.toggle("select-arrow-active");
      });
  }

  /*
    a function that will close all select boxes in the document,
    except the current select box:
  */
  function closeAllSelect(elmnt) {
    var optionDIVs, shownSelectDIV, i, arrNo = [];

    optionDIVs = document.getElementsByClassName("select-items");
    shownSelectDIV = document.getElementsByClassName("select-selected");
    for (i = 0; i < shownSelectDIV.length; i++) {
      if (elmnt == shownSelectDIV[i]) {
        arrNo.push(i)
      } else {
        shownSelectDIV[i].classList.remove("select-arrow-active");
      }
    }
    for (i = 0; i < optionDIVs.length; i++) {
      if (arrNo.indexOf(i)) {
        optionDIVs[i].classList.add("select-hide");
      }
    }
  }

  /*if the user clicks anywhere outside the select box,
  then close all select boxes:*/
  document.addEventListener("click", closeAllSelect);
</script>